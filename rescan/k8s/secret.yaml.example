# Kubernetes Secret for Rescan Application (EXAMPLE - DO NOT COMMIT REAL SECRETS!)
# Educational Note: Secrets store sensitive data with base64 encoding and RBAC protection
# This is an EXAMPLE file - copy to secret.yaml and add real credentials

apiVersion: v1
kind: Secret
metadata:
  name: rescan-secrets
  namespace: rescan
  labels:
    app: rescan
type: Opaque

# Use 'stringData' for plain text (auto-encoded to base64)
stringData:
  # Azure AD (Entra ID) Service Principal Credentials
  AZURE_TENANT_ID: "your-tenant-id-here"
  AZURE_CLIENT_ID: "your-client-id-here"
  AZURE_CLIENT_SECRET: "your-client-secret-here"
  
  # Azure OpenAI Configuration
  AZURE_OPENAI_ENDPOINT: "https://your-resource.openai.azure.com/"
  AZURE_OPENAI_DEPLOYMENT_NAME: "gpt-4o"

# OR use 'data' for base64-encoded values:
# data:
#   AZURE_TENANT_ID: "base64-encoded-tenant-id"
#   AZURE_CLIENT_ID: "base64-encoded-client-id"
#   AZURE_CLIENT_SECRET: "base64-encoded-client-secret"

---
# How to create the Secret from command line (RECOMMENDED):
# 
# kubectl create secret generic rescan-secrets \
#   --from-literal=AZURE_TENANT_ID='your-tenant-id' \
#   --from-literal=AZURE_CLIENT_ID='your-client-id' \
#   --from-literal=AZURE_CLIENT_SECRET='your-client-secret' \
#   --from-literal=AZURE_OPENAI_ENDPOINT='https://your-resource.openai.azure.com/' \
#   --from-literal=AZURE_OPENAI_DEPLOYMENT_NAME='gpt-4o' \
#   --namespace=rescan
#
# This avoids storing secrets in files

---
# Educational Notes:
# 
# 1. NEVER commit secret.yaml with real credentials to Git
#    - Add secret.yaml to .gitignore
#    - Only commit secret.yaml.example (this file)
#
# 2. Base64 is ENCODING, not ENCRYPTION
#    - Anyone with cluster access can decode secrets
#    - Use RBAC to restrict access
#    - Consider external secret management for production (Azure Key Vault, etc.)
#
# 3. View secrets (for debugging):
#    kubectl get secret rescan-secrets -n rescan -o yaml
#    kubectl get secret rescan-secrets -n rescan -o jsonpath='{.data.AZURE_CLIENT_SECRET}' | base64 -d
#
# 4. Update secrets:
#    kubectl edit secret rescan-secrets -n rescan
#    OR delete and recreate:
#    kubectl delete secret rescan-secrets -n rescan
#    kubectl create secret generic rescan-secrets ...
