# ===============================================
# Rescan - Educational Environment Configuration
# ===============================================
# 
# IMPORTANT: This is a template file showing what environment variables are needed.
# Copy this file to '.env' and fill in your actual values.
# NEVER commit your real .env file with secrets!
#
# Educational Learning: Environment variables keep sensitive information 
# separate from your code, making applications secure and deployable.

# === Server Configuration ===
# Port number where your Express server will listen
# Educational note: 3000 is a common development port
PORT=3000

# === Database Configuration ===
# SQLite database file path
# Educational note: SQLite stores everything in a single file
DATABASE_URL=sqlite:./data/rescan.db

# === Azure OpenAI Configuration with Azure AD (Entra ID) ===
# Educational note: Using Service Principal authentication (more secure than API keys)
# Get these from your Azure Portal - App Registration

# Azure AD Tenant ID (Directory ID) from your Azure portal
# Find it: Azure Portal > Azure Active Directory > Properties
AZURE_TENANT_ID=your_tenant_id_here

# Azure AD Application (Client) ID from your app registration
# Find it: Azure Portal > App Registrations > Your App > Overview
AZURE_CLIENT_ID=your_client_id_here

# Azure AD Client Secret (Application Secret) from your app registration
# Find it: Azure Portal > App Registrations > Your App > Certificates & secrets
# THIS IS SECRET - Never share this value!
AZURE_CLIENT_SECRET=your_client_secret_here

# Your Azure OpenAI endpoint URL (looks like: https://your-resource.openai.azure.com/)
AZURE_OPENAI_ENDPOINT=your_endpoint_here

# Azure OpenAI model deployment name (usually 'gpt-4o' or similar)
# What you named your GPT-4V deployment in Azure
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o

# === Educational Configuration ===
# Set to 'true' to enable detailed logging for learning
# This shows students more information about how the app works
EDUCATIONAL_MODE=true

# Set to 'development' for detailed error messages
# In production, this would be 'production' to hide sensitive error details
NODE_ENV=development

# === File Upload Limits ===
# Maximum file size for image uploads (in bytes)
# Educational note: 5MB = 5 * 1024 * 1024 bytes
MAX_FILE_SIZE=5242880

# Maximum number of concurrent requests to process
# Educational note: Limits prevent overwhelming the AI service
MAX_CONCURRENT_REQUESTS=5

# ===============================================
# SETUP INSTRUCTIONS:
# ===============================================
# 1. Copy this file to '.env' (remove the .example)
# 2. Azure AD Service Principal Setup:
#    a. Go to Azure Portal > App Registrations > New Registration
#    b. Copy the Tenant ID and Client ID
#    c. Create a client secret (Certificates & secrets tab)
#    d. Grant "Cognitive Services User" role on your Azure OpenAI resource
# 3. Fill in the AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET values
# 4. Fill in the AZURE_OPENAI_ENDPOINT and AZURE_OPENAI_DEPLOYMENT_NAME
# 5. Run 'npm run db:setup' to create the SQLite database
# 6. Run 'npm run dev' to start the development server
# 
# Troubleshooting:
# - If you get "Failed to obtain Azure AD token" errors:
#   * Check tenant ID, client ID, and client secret are correct
#   * Verify service principal has "Cognitive Services User" role
#   * Check Azure OpenAI resource allows Azure AD authentication
# - If database errors occur, try 'npm run db:reset'
# - Ask classmates or instructor if you get stuck!